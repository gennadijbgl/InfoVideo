"use strict";function nsVideoPlugin(){for(var u,r,n,o,f,e,i=this.getLis(),t=0;t<i.length;t++)for(u=i[t].getElementsByTagName("*"),r=0;r<u.length;r++)u[r].className=="video"&&(n=u[r].getElementsByTagName("iframe"),n.length?(n=n[0],i[t].player=n,o=n.src.toLowerCase(),o.indexOf("player.vimeo")!=-1?(n.tp="VM",addVimeoEventHandlers(this,i[t],n)):o.indexOf("youtube.com")!=-1&&(n.tp="YT",extendSliderFunForYoutube.call(this,i[t]))):(n=u[r].getElementsByTagName("video"),n.length||(n=u[r].getElementsByTagName("audio")),n.length&&(n=n[0],i[t].player=n,n.tp="VA",addVAEventHandlers(this,n))),f=this,i[t].player&&(i[t].onclick=function(){f.playVideo&&f.playVideo(this.player)},i[t].player.tp!="VA"&&(e=document.createElement("div"),e.className="stopVideoIcon",e.onclick=function(n){f.unloadPlayer();n.stopPropagation()},u[r].appendChild(e))));this.playVideo=function(n,t){var i;this.iframe!=n&&this.unloadPlayer();t||(t=0);setSliderWhenOnPlay(this);switch(n.tp){case"VM":this.playVideo_VM?this.playVideo_VM(n):t<25?(i=this,setTimeout(function(){i.playVideo(n,++t)},500)):this.next();break;case"YT":this.playVideo_YT?this.playVideo_YT(n):t<25?(i=this,setTimeout(function(){i.playVideo(n,++t)},500)):this.next();break;default:this.playVideo_VA(n)}};this.playAutoVideo=function(n){if(n.player){var i=n.player.getAttribute("data-autoplay"),t=0;i=="true"?t=1:i!="1"||n.player.AP||(t=1,n.player.AP=1);t&&(this.stop(),this.playVideo(n.player))}};this.unloadPlayer=function(){var n=this.iframe;if(n){n.parentNode.style.zIndex="auto";switch(n.tp){case"VM":this.unloadPlayer_VM(n);break;case"YT":this.unloadPlayer_YT(n);break;default:this.unloadPlayer_VA(n)}}};this.setIframeSize=function(){for(var n,i,r,f,u=this.getLis(),t=0;t<u.length;t++)n=u[t].player,n&&(i=n.getAttribute("data-width"),i?r=n.getAttribute("data-height"):(f=n.parentNode.parentNode.parentNode,i=f.offsetWidth,r=f.offsetHeight),n.setAttribute("width",i),r&&n.setAttribute("height",r))};this.setIframeSize()}function addEvent(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function setSliderWhenOnPlay(n){n.stop();n.iframe=n.getLis()[n.getIndex()].player;set_ZIndex(n.iframe,1)}function set_ZIndex(n,t){n.parentNode.style.zIndex=t?"1964":"auto"}function extendSliderFunForVimeo(){this.postToIframe=function(n,t,i){if(this.iframe=n,window.JSON){var r={method:t};i&&(r.value=i);this.iframe.contentWindow.postMessage(JSON.stringify(r),this.iframe.getAttribute("src").split("?")[0])}};this.playVideo_VM=function(n){this.postToIframe(n,"play")};this.unloadPlayer_VM=function(n){window.JSON&&n.contentWindow.postMessage(JSON.stringify({method:"pause"}),n.getAttribute("src").split("?")[0])};this.backToStartFrame=function(){this.iframe&&window.JSON&&(this.iframe.src=this.iframe.getAttribute("src"))}}function addVimeoEventHandlers(n,t,i){function u(n){if(n.data)try{var t=JSON.parse(n.data);switch(t.event){case"ready":f();break;case"play":e();break;case"finish":o()}}catch(i){}}function f(){r("addEventListener","play");r("addEventListener","finish")}function e(){n.iframe=i;setSliderWhenOnPlay(n)}function o(){n.iframe==i&&(set_ZIndex(n.iframe,0),n.backToStartFrame(),setTimeout(function(){n.next()},120))}function r(n,t){if(i&&window.JSON){var r={method:n};t&&(r.value=t);i.contentWindow.postMessage(JSON.stringify(r),i.getAttribute("src").split("?")[0])}}n.playVideo_VM||extendSliderFunForVimeo.call(n);addEvent(window,"message",u)}function extendSliderFunForYoutube(n){var t,i;this.unloadPlayer_YT||(t=document.createElement("script"),t.src="https://www.youtube.com/iframe_api",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(t,i));n.player.src+="&origin="+location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");window._zSlider=this;this.unloadPlayer_YT=function(n){var t=n.parentNode.parentNode.yplayer;t&&typeof t.pauseVideo=="function"?t.pauseVideo():(n.src=n.getAttribute("src"),n.parentNode.parentNode.yplayer=new YT.Player(n.id,{events:{onStateChange:onYTPlayerStateChange}}))}}function onYTPlayerStateChange(n){n.data==1?setSliderWhenOnPlay(_zSlider):n.data==0&&(setTimeout(function(){_zSlider.iframe.src=_zSlider.iframe.getAttribute("src");_zSlider.iframe.parentNode.parentNode.yplayer=new YT.Player(_zSlider.iframe.id,{events:{onStateChange:onYTPlayerStateChange}})},500),_zSlider.next())}function onYouTubePlayerAPIReady(){for(var t,i=_zSlider.getLis(),n=0;n<i.length;n++)t=i[n].player,t&&t.tp=="YT"&&(t.id=_zSlider.sliderId+"-ifr"+n,i[n].yplayer=new YT.Player(t.id,{events:{onStateChange:onYTPlayerStateChange}}));_zSlider.playVideo_YT=function(n){n.parentNode.parentNode.yplayer&&n.parentNode.parentNode.yplayer.playVideo()}}function extendSliderFunForhtml5VA(){this.playVideo_VA=function(n){n.play&&n.play()};this.unloadPlayer_VA=function(n){n.pause&&n.pause()}}function addVAEventHandlers(n,t){n.playVideo_VA||extendSliderFunForhtml5VA.call(n);var i={handleEvent:function(n){n.preventManipulation&&n.preventManipulation();switch(n.type){case"click":n.stopPropagation();break;case"play":this.play();break;case"ended":this.ended();break;case"loadedmetadata":this.loaded()}},play:function(){setSliderWhenOnPlay(n)},ended:function(){set_ZIndex(t,0);n.next();t.currentTime=0},loaded:function(){}};addEvent(t,"click",i);addEvent(t,"play",i);addEvent(t,"ended",i);addEvent(t,"loadedmetadata",i)}